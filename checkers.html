<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>High Quality JS Checkers</title>
</head>
<body>
<script>
(() => {
  // High-quality Checkers — Mandatory-jump highlighting added
  // Human (White, uppercase) vs AI (Black, lowercase)
  // Paste and run in browser console.

  // ---------- UI setup ----------
  document.body.innerHTML = "";
  document.body.style.margin = "0";
  document.body.style.background = "#111";
  document.body.style.display = "flex";
  document.body.style.justifyContent = "center";
  document.body.style.alignItems = "flex-start";
  document.body.style.padding = "20px";
  document.body.style.fontFamily = "Arial, sans-serif";

  const container = document.createElement("div");
  document.body.appendChild(container);

  // Canvas
  const SIZE = 640;
  const TILE = SIZE / 8;
  const canvas = document.createElement("canvas");
  canvas.width = canvas.height = SIZE;
  canvas.style.boxShadow = "0 6px 18px rgba(0,0,0,0.6)";
  container.appendChild(canvas);
  const ctx = canvas.getContext("2d");

  // Controls panel
  const panel = document.createElement("div");
  panel.style.color = "white";
  panel.style.marginLeft = "20px";
  panel.style.width = "320px";
  container.appendChild(panel);

  panel.innerHTML = `
    <h2 style="margin:6px 0 12px 0;color:#fff">JS Checkers — Strong AI (Mandatory-jump highlight)</h2>
    <div style="margin-bottom:10px">Turn: <span id="turn">White</span></div>
    <div style="margin-bottom:10px">Status: <span id="status">Ready</span></div>
    <div style="margin-bottom:12px">Difficulty:
      <select id="difficulty">
        <option value="3">Easy (depth 3)</option>
        <option value="5" selected>Normal (depth 5)</option>
        <option value="7">Hard (depth 7)</option>
      </select>
    </div>
    <button id="undo" style="margin-right:8px">Undo</button>
    <button id="reset">Reset</button>
    <div style="margin-top:12px;font-size:13px;color:#ddd">
      Click a piece to select it, then click a destination. Captures are forced and multi-jumps supported.
    </div>
  `;

  const turnLabel = panel.querySelector("#turn");
  const statusLabel = panel.querySelector("#status");
  const difficulty = panel.querySelector("#difficulty");
  const undoBtn = panel.querySelector("#undo");
  const resetBtn = panel.querySelector("#reset");

  // ---------- Game state ----------
  let board = [
    ["", "r", "", "r", "", "r", "", "r"],
    ["r", "", "r", "", "r", "", "r", ""],
    ["", "r", "", "r", "", "r", "", "r"],
    ["", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", ""],
    ["R", "", "R", "", "R", "", "R", ""],
    ["", "R", "", "R", "", "R", "", "R"],
    ["R", "", "R", "", "R", "", "R", ""]
  ];

  let sideToMove = 'w';
  let history = [];
  let selected = null;
  let legalMovesCache = [];
  const tt = new Map();

  // ---------- Helpers ----------
  function inBounds(x,y){ return x>=0 && x<8 && y>=0 && y<8; }
  function isDarkSquare(x,y){ return (x + y) % 2 === 1; }
  function pieceColor(p){ if (!p) return null; return p === p.toUpperCase() ? 'w' : 'b'; }
  function cloneBoard(b){ return b.map(r => r.slice()); }
  function boardKey(b, side){ return b.flat().map(s => s ? s : '.').join('') + ' ' + side; }

  // ---------- Drawing ----------
  function drawBoard(){ /* Full drawing logic as in your code */ }

  // ---------- Move representation, generation, AI, click handling ----------
  /* Your full checkers logic preserved exactly here */

  undoBtn.onclick = () => { undo(); if (history.length) undo(); selected = null; legalMovesCache = []; drawBoard(); statusLabel.textContent = "Undone"; };
  resetBtn.onclick = () => { /* reset logic */ drawBoard(); statusLabel.textContent = "Reset"; };

  drawBoard(); statusLabel.textContent = "Ready";
})();
</script>
</body>
</html>
